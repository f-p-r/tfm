@if (variant() === 'desktop') {
  @if (!isAuthenticated()) {
    <a routerLink="/login" class="ds-nav-link flex items-center gap-1.5">
      <span class="material-symbols-outlined" style="font-size: 1.25rem;">person_add</span>
      <span>Entrar</span>
    </a>
  } @else {
    <div class="relative inline-block">
      <button
        type="button"
        (click)="toggle()"
        [attr.aria-expanded]="isOpen()"
        class="ds-nav-link flex items-center gap-2"
      >
        <span>{{ displayName() }}</span>
        <svg class="w-4 h-4 opacity-70" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
      </button>

      @if (isOpen()) {
        <div class="absolute right-0 mt-2 w-48 bg-white border border-neutral-medium rounded-lg shadow-lg z-50 overflow-hidden">
          <div class="py-1">
            <a
              routerLink="/perfil"
              (click)="close()"
              class="block px-4 py-2 text-sm text-neutral-dark hover:bg-neutral-light hover:text-brand-primary transition-colors"
            >
              Mi perfil
            </a>
            <div class="border-t border-neutral-medium my-1"></div>
            <button
              type="button"
              (click)="logout()"
              class="w-full text-left block px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors"
            >
              Cerrar sesión
            </button>
          </div>
        </div>
      }
    </div>
  }
}

@if (variant() === 'mobile') {
  @if (!isAuthenticated()) {
    <a routerLink="/login" class="ds-nav-mobile-link flex items-center gap-2">
      <span class="material-symbols-outlined" style="font-size: 1.25rem;">person_add</span>
      <span>Entrar</span>
    </a>
  } @else {
    <div class="border-t border-neutral-medium pt-2 mt-2">
      <button
        type="button"
        (click)="toggle()"
        [attr.aria-expanded]="isOpen()"
        class="ds-nav-mobile-link w-full text-left flex justify-between items-center"
      >
        <span class="font-semibold">{{ displayName() }}</span>
        <svg [class.rotate-180]="isOpen()" class="w-4 h-4 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
      </button>

      @if (isOpen()) {
        <div class="pl-4 pb-2 space-y-1 bg-neutral-light/20 rounded-b-lg">
          <a
            routerLink="/perfil"
            (click)="close()"
            class="ds-nav-mobile-link text-sm text-neutral-dark"
          >
            Mi perfil
          </a>
          <button
            type="button"
            (click)="logout()"
            class="ds-nav-mobile-link w-full text-left text-sm text-red-600"
          >
            Cerrar sesión
          </button>
        </div>
      }
    </div>
  }
}
